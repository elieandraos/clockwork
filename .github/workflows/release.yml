# This workflow will create a gitHub tag & release whenever a commit starts with ":bookmark: release"

name: Create gitHub tag & release

on:
    push:
        branches: [master]

jobs:
    build:
        runs-on: ubuntu-latest
        if: |
            github.event.head_commit.message
            && startsWith(github.event.head_commit.message, ':bookmark: release')
        steps:
            - uses: actions/checkout@master
            - name: Tag and prepare release
              id: tag_and_prepare_release
              uses: K-Phoen/semver-release-action@master
              with:
                  release_branch: master
              env:
                  GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN_GITHUB }}
            - name: Upload release notes
              if: steps.tag_and_prepare_release.outputs.tag
              uses: Roang-zero1/github-create-release-action@master
              with:
                  created_tag: ${{ steps.tag_and_prepare_release.outputs.tag }}
              env:
                  GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN_GITHUB }}

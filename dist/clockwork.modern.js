var e=0;function t(t){return"__private_"+e+++"_"+t}function r(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}const s=require("dayjs"),i=require("dayjs/plugin/isSameOrAfter"),n=require("dayjs/plugin/isSameOrBefore"),a=require("dayjs/plugin/isLeapYear"),u=require("dayjs/plugin/isToday"),o=require("dayjs/plugin/isTomorrow"),l=require("dayjs/plugin/isYesterday"),h=require("dayjs/plugin/customParseFormat");function f(e){return"string"==typeof e}function d(e){return Array.isArray(e)}function m(e,t=null){return!(!f(t)&&!d(t))&&(t=f(t)?t.split(","):t).includes(e)}function c(e,t=null){return"object"==typeof e?JSON.stringify(e)===JSON.stringify(t):e===t}s.extend(i),s.extend(n),s.extend(a),s.extend(u),s.extend(o),s.extend(l),s.extend(h);var p={__proto__:null,required:function(e){return!(Array.isArray(e)&&0===e.length||[null,void 0,""].includes(e))},string:f,array:d,integer:function(e){return Number.isInteger(e)},numeric:function(e){return!Number.isNaN(parseFloat(e))&&isFinite(e)},alpha:function(e){return f(e)&&new RegExp("^[A-Za-z]+$").test(e.toLowerCase())},alpha_numeric:function(e){return f(e)&&new RegExp("^[a-zA-Z0-9\\s]+$").test(e.toLowerCase())},alpha_dash:function(e){return f(e)&&new RegExp("^[a-zA-Z-_]+$").test(e.toLowerCase())},starts_with:function(e,t=null){return f(e)&&f(t)&&e.startsWith(t)},ends_with:function(e,t=null){return f(e)&&f(t)&&e.endsWith(t)},boolean:function(e){return[!0,!1].includes(e)},is_in:m,not_in:function(e,t=null){return!(!f(t)&&!d(t)||m(e,t))},size:function(e,t=null){return!(!f(e)&&!d(e))&&e.length===t},min:function(e,t=null){return!(!e&&!d(e))&&(e=f(e)||d(e)?e.length:e,parseFloat(e)>=t)},max:function(e,t=null){return!(!e&&!d(e))&&(e=f(e)||d(e)?e.length:e,parseFloat(e)<=t)},same:c,different:function(e,t=null){return!c(e,t)},url:function(e){return new RegExp("^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-.][a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$").test(String(e).toLowerCase())},email:function(e){return new RegExp("^\\S+@\\S+[.][0-9a-z]+$").test(String(e).toLowerCase())},uuid:function(e){return!!f(e)&&new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$").test(String(e).toLowerCase())},matches_regex:function(e,t=null){return!!f(e)&&new RegExp(t).test(String(e).toLowerCase())},json:function(e){if(!f(e))return!1;try{return"object"==typeof JSON.parse(e)}catch(e){return!1}},date:function(e){return s(e).isValid()},after:function(e,t=null){return s(e).isAfter(t)},before:function(e,t=null){return s(e).isBefore(t)},after_or_equal:function(e,t=null){return s(e).isSameOrAfter(t)},before_or_equal:function(e,t=null){return s(e).isSameOrBefore(t)},leap_year:function(e){return s(e).isLeapYear()},today:function(e){return s(e).isToday()},tomorrow:function(e){return s(e).isTomorrow()},yesterday:function(e){return s(e).isYesterday()},date_format:function(e,t){return s(e,t,!0).isValid()}};function b(e){return!(!e||Array.isArray(e)||"object"!=typeof e||e.constructor!==Object)}function g(e){return b(e)&&0===Object.keys(e).length}const w={after:'This field must be a date after "{param}"',after_or_equal:'This field must be a date after or equal to "{param}"',alpha:"This field must only contain letters",alpha_dash:"This field must only contain letters, dashes and underscores",alpha_numeric:"This field must only contain letters and numbers",array:"This field must be an array",before:'This field must be a date before "{param}"',before_or_equal:'This field must be a date before or equal to "{param}"',boolean:"This field must be boolean",date:"This field must be a valid date",date_format:'This date format must be "{param}"',different:'This field must be different than "{param}"',email:"This field must be a valid email.",ens_with:'This field must end with "{param}"',integer:"This field must be a number.",is_in:'This field must be one of "{param}"',json:"This field must be a json object",leap_year:"This date must be a leap year",matches_regex:'This field must match the regex "{param}"',max:'This field must not be greater than "{param}"',min:'This field must not be less than "{param}"',not_in:'This field must not be one of "{param}"',numeric:"This field must be numeric",required:"This field is required",same:'This field must be the same as "{param}"',size:'The field length must be "{param}"',starts_with:'This field must start with "{param}"',string:"This field must be a string",today:"This date must be today",tomorrow:"This date must be tomorrow",url:"This field must be a valid url",uuid:"This field must be a valid uuid"},y=require("dot-prop");var E=t("data"),T=t("rules"),_=t("errorsBag"),j=t("validate"),v=t("toArray"),x=t("parse"),O=t("executeRule"),q=t("getErrorMessage"),R=t("addError");class P{constructor(){Object.defineProperty(this,R,{value:L}),Object.defineProperty(this,q,{value:z}),Object.defineProperty(this,O,{value:C}),Object.defineProperty(this,x,{value:M}),Object.defineProperty(this,v,{value:A}),Object.defineProperty(this,j,{value:S}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),r(this,E)[E]={},r(this,T)[T]={},r(this,_)[_]=[],this.availableRules=p,this.defaultErrorMessages=w,this.customErrorMessages={}}setData(e){if(!b(e))throw new Error("setData() argument must be an object.");return r(this,E)[E]=e,this}setRules(e){if(!b(e))throw new Error("setRules() argument must be an object.");return r(this,T)[T]=e,this}setCustomErrorMessages(e){if(!b(e))throw new Error("setCustomErrorMessages() argument must be an object.");return this.customErrorMessages=e,this}getData(){return r(this,E)[E]}getRules(){return r(this,T)[T]}getCustomErrorMessages(){return this.customErrorMessages}passes(){return r(this,j)[j]()}fails(){return!this.passes()}hasErrors(e){return!!this.getErrors(e).length}getErrors(e){return r(this,_)[_].filter(t=>t.dataKey===e).map(e=>e.message)}getFirstError(e){return this.hasErrors(e)?this.getErrors(e)[0]:null}extend(e,t){if(!e||!t)throw new Error("extend() requires two arguments: name string and callback function");if(this.availableRules.hasOwnProperty(e))throw new Error('The rule "'+e+'" exists.');if("function"!=typeof t||"[object Function]"!=={}.toString.call(t))throw new Error('The closure of the custom rule "'+e+'" should be a function.');if("boolean"!=typeof t())throw new Error(`The closure of the custom rule ${e} should return a boolean`);return this.availableRules[e]=t,this}}function S(){if(g(r(this,T)[T]))throw new Error("the rules object is missing. Use setRules() to set it");if(g(r(this,E)[E]))throw new Error("the data object is missing. Use setData() to set it");r(this,_)[_]=[];for(let[e,t]of Object.entries(r(this,T)[T])){let s=y.has(r(this,E)[E],e)?y.get(r(this,E)[E],e):e,i=r(this,v)[v](t);i.includes("sometimes")&&!s||i.forEach(t=>{"sometimes"!==t&&r(this,O)[O](s,t,e)})}return!r(this,_)[_].length}function A(e){let t=e.split("|");return t.forEach((e,r)=>{t[r]=e.trim()}),t}function M(e){let t=e,s=null;return"string"==typeof e&&e.split(":").length>1&&(t=e.split(":")[0].trim(),s=e.split(":")[1].trim(),y.has(r(this,E)[E],s)&&(s=y.get(r(this,E)[E],s))),{rule:t,arg:s}}function C(e,t,s){let{rule:i,arg:n}=r(this,x)[x](t);if(!this.availableRules.hasOwnProperty(i))throw new Error('the rule "'+i+'" does not exist.');if(this.availableRules[i](e,n))return;let a=r(this,q)[q](s,i,n);r(this,R)[R](s,i,a)}function z(e,t,r=null){let s,i=e+"."+t;if(this.customErrorMessages.hasOwnProperty(i))s=this.customErrorMessages[i];else{if(!this.defaultErrorMessages.hasOwnProperty(t))throw new Error(`Set a customer error message for the rule ${t}`);s=this.defaultErrorMessages[t]}return s.replace("{param}",r)}function L(e,t,s){let i=e+"."+t;r(this,_)[_].push({key:i,dataKey:e,message:s})}export{P as default};
//# sourceMappingURL=clockwork.modern.js.map
